#
# dot.muttrc:
#	Mutt configuration
#

set mbox_type=Maildir
set folder=~/Mail
set spoolfile=~/Mail

set mbox=+
set record=+Sent
set postponed=+Drafts

set nomove
set sort=threads
set include

set date_format="%Y/%m/%d %H:%M:%S"
set folder_format="%2C %t %N %F %2l %-8.8u %-8.8g %5s %d %f"
set index_format="%4C %Z %[%b %d] %-15.15L (%?l?%4l&%4c?) %s"
set pager_format="-%Z- %C/%m (%e/%E): %* %D -- (%P)"

set send_charset="us-ascii:iso-2022-jp:utf-8"
set assumed_charset="shift_jis:iso-2022-jp:euc-jp:utf-8"
set attach_charset="euc-jp:utf-8"

set thorough_search=yes
set rfc2047_parameters=yes
set forward_decode=yes
set mime_forward_decode=no
set ignore_linear_white_space=yes

set edit_headers=yes
set fast_reply=yes

set nomarkers

set reverse_name
set noreverse_realname

set editor="vim '+/^$'"

set read_inc=100

set header_cache="~/.mutt/cache"
set message_cachedir="~/.mutt/cache"

# Cryptographic
set crypt_use_gpgme

set alias_file=~/.mail_aliases
source ~/.mail_aliases

mailboxes = > < =Drafts =Junk

ignore *
unignore from: date subject to cc
hdr_order Date: From: To: Cc: Subject:

iconv-hook Windows-31J cp932
iconv-hook shift-jis cp932

alternative_order text/plain text
auto_view text/html

bind generic l next-page
bind generic h previous-page
bind generic N search-opposite

bind index,pager f next-page
bind index,pager b previous-page
bind index,pager H display-toggle-weed
bind index,pager ! flag-message
bind index,pager B bounce-message
bind index,pager F forward-message
bind index,pager \c] next-unread-mailbox
bind index,pager R group-reply
bind index,pager E resend-message
bind index,pager N search-opposite
bind index,pager q quit

bind index g first-entry
bind index G last-entry
bind index X decode-save

bind pager g top
bind pager G bottom
bind pager j next-line
bind pager k previous-line
bind pager l next-undeleted
bind pager h previous-undeleted
bind pager <BackSpace> search-toggle

bind attach i exit

macro attach	  V "<pipe-entry>cat > ~/.cache/mutt/mail.html && url-launcher ~/.cache/mutt/mail.html && rm ~/.cache/mutt/mail.html<enter>"
macro browser	  q "<exit><quit>"	"save changes to mailbox and quit"
macro index,pager Y "<change-folder>?"	"show folder list"
macro browser	  Y "<exit>"		"exit this menu"
macro index	  i "<change-folder>?<toggle-mailboxes>"	\
					"show incoming mailboxes list"
macro index,pager . "<shell-escape>fetchmail<Enter>"		\
					"retrieve mail with fetchmail"
macro index,pager \cf "<shell-escape>estmail<Enter><change-folder>=.Search<Enter>" \
					"search with Hyper Estraier"

source `~/.mutt/muttcolor`

source ~/.mutt/muttrc_local
